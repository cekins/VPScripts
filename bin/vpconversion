#!/bin/bash

# TODO: desc

libDir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/../lib/"

source ${libDir}functions.sh



# Get screenshot directory
ssDir=$(getScreenshotDir)

# Iterate over screenshots in folder
for ssFile in $(ls "$ssDir")
do
	# Extract vp name from each screenshot
	vpName=$(getVPName $ssFile)
	vpDir=$(getVPDir)

	echo "Here: $(getMatchingVPs $vpName)"

	for vpFile in $(find "$vpDir" -name "${vpName}*")
	do

		# Print name of current comparison
		echo ${vpFile#${vpDir}}

		# TODO make robust to names that start the same

		# Compare via utility
		/opt/squish-6.4/bin/vpdiff "$vpFile" "junk" "$ssDir$ssFile"
	done
done
